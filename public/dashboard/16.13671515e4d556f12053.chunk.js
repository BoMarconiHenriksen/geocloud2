(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"230285177d1a30c44985":function(e,t,r){"use strict";r.r(t),r.d(t,"SubuserPage",function(){return V});var a,s=r("8af190b70a6bc55c6f1b"),i=r.n(s),o=r("d7dd51e1bf6bfc2c9c3d"),n=r("ab4cb61bcb2dc161defb"),c=r("ab039aecd4a1d4fedc0e"),d=r("a28fc3c963a1d4d1a2e5"),u=r("0c50c1cca2596d6cae22"),p=r.n(u),l=r("0b3cb19af78752326f59"),h=r("16c7abd7abc407b9f247"),f=r.n(h),b=r("ae9596d86622312bdbac"),m=r.n(b),v=r("921c0b8c557fe6ba5da8"),g=r.n(v),y=r("63bac7d5ea40ecc9ba06"),w=r.n(y),S=r("435859b6b76fb67a754a"),O=r.n(S),j=r("2aea235afd5c55b8b19b"),P=r.n(j),M=r("c7fd554010f79f6c0ef8"),C=r.n(M),N=r("103c6b1cf0cce809ff01"),E=r("6542cd13fd5dd1bcffd4"),_=r("a72b40110d9c31c9b5c5"),x=(r("d040d59f5cc4b33ab62b"),r("5b91c04697eda21cf7ea"));function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t,r,s){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=s;else if(o>1){for(var n=new Array(o),c=0;c<o;c++)n[c]=arguments[c+3];t.children=n}if(t&&i)for(var d in i)void 0===t[d]&&(t[d]=i[d]);else t||(t=i||{});return{$$typeof:a,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}function T(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(s=a.key,i=void 0,i=function(e,t){if("object"!==F(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==F(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(s,"string"),"symbol"===F(i)?i:String(i)),a)}var s,i}function U(e,t){return(U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,a=I(e);if(t){var s=I(this).constructor;r=Reflect.construct(a,arguments,s)}else r=a.apply(this,arguments);return function(e,t){if(t&&("object"===F(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=l.a.div.withConfig({displayName:"SubuserPage__TextFieldWrapper",componentId:"hglv40-0"})(["padding-bottom:10px;"]),z=l.a.div.withConfig({displayName:"SubuserPage__OverlayContainer",componentId:"hglv40-1"})(["position:absolute;width:100%;height:100%;background-color:rgba(255,255,255,0.7);z-index:1000;"]),A=l.a.div.withConfig({displayName:"SubuserPage__OverlayInner",componentId:"hglv40-2"})(["position:absolute;top:10%;text-align:center;width:100%;"]),D="null",q=k(g.a,{variant:"h6",color:"inherit"},void 0,k(c.FormattedMessage,{id:"User was created"})),B=k(g.a,{variant:"h6",color:"inherit"},void 0,k(c.FormattedMessage,{id:"User was updated"})),J=k(P.a,{variant:"contained",color:"primary"},void 0,k(c.FormattedMessage,{id:"Dashboard"})),$=k(c.FormattedMessage,{id:"Create subuser"}),Q=k(c.FormattedMessage,{id:"Change subuser settings"}),G=k(c.FormattedMessage,{id:"containers.SubuserPage.descriptionCreate"}),H=k(c.FormattedMessage,{id:"containers.SubuserPage.descriptionEdit"}),K=k(c.FormattedMessage,{id:"containers.SubuserPage.descriptionInheritPrivilegesCreate"}),L=k(c.FormattedMessage,{id:"containers.SubuserPage.descriptionInheritPrivilegesEdit"}),V=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(o,i.a.PureComponent);var t,r,a,s=R(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=s.call(this,e)).state={addingSubuser:!0,screenName:"",email:"",password1:"",password2:"",createSchema:!1,usergroup:D},t}return t=o,(r=[{key:"componentWillMount",value:function(){this.props.dispatch(Object(_.h)()),this.props.subusers||this.props.dispatch(Object(_.F)({screenName:this.props.user.screenName})),this.setupUser(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.setupUser(e)}},{key:"setupUser",value:function(e){var t=this;this.props.match&&this.props.match.params&&this.props.match.params.id&&e.subusers&&e.subusers.map(function(e){e.screenName===t.props.match.params.id&&t.setState({addingSubuser:!1,screenName:e.screenName,email:e.email,password1:"",password2:"",createSchema:!1,usergroup:e.usergroup})})}},{key:"handleSave",value:function(){if(this.state.addingSubuser){var e={name:this.state.screenName,email:this.state.email,password:this.state.password1};this.state.usergroup&&this.state.usergroup!==D&&(e.usergroup=this.state.usergroup),this.props.dispatch(Object(_.j)({data:e}))}else this.props.dispatch(Object(_.Q)(this.props.match.params.id,{password:this.state.password1,usergroup:this.state.usergroup}))}},{key:"render",value:function(){var e=this,t=[];this.props.subusers&&this.props.subusers.map(function(r,a){e.state.screenName!==r.screenName&&t.push(k(w.a,{value:r.screenName},"option_".concat(a),r.screenName))});var r=!1,a=Object(x.a)(this.state.password1),s=Object(x.a)(this.state.password2),i=this.state.password1===this.state.password2,o=!1;r=this.state.addingSubuser?(o=p.a.validate(this.state.email))&&a&&s&&i:!this.state.password1||a&&s&&i;var n=!1,d=!1;this.props.createSuccess&&this.props.createUsername?n=q:this.props.updateSuccess?n=B:this.props.createError?d=k(c.FormattedMessage,{id:"errors.".concat(this.props.createErrorCode)}):this.props.updateError&&(d=k(c.FormattedMessage,{id:"errors.".concat(this.props.updateErrorCode)}));var u=!1;n&&(u=k(z,{},void 0,k(A,{},void 0,n,k(N.a,{to:"/dashboard/"},void 0,J))));var l=k(W,{},void 0,k(C.a,{fullWidth:!0,type:"password",label:this.props.intl.formatMessage({id:"Password"}),value:this.state.password1,required:!0,error:this.state.password1.length>0&&!a,helperText:this.props.intl.formatMessage({id:"Minimum 8 characters long, at least one capital letter and one digit"}),onChange:function(){e.setState({password1:event.target.value})}})),h=k(W,{},void 0,k(C.a,{fullWidth:!0,type:"password",label:this.props.intl.formatMessage({id:"Retype password"}),value:this.state.password2,required:!0,error:this.state.password2.length>0&&(!s||!i),helperText:this.state.password2.length>0&&!i&&this.props.intl.formatMessage({id:"Passwords do not match"}),onChange:function(){e.setState({password2:event.target.value})}}));return k("div",{style:{position:"relative"}},void 0,u,k(O.a,{container:!0,spacing:24},void 0,k(O.a,{item:!0,md:12},void 0,k(g.a,{variant:"h6",color:"inherit"},void 0,this.state.addingSubuser?$:Q),k(g.a,{variant:"body1",color:"inherit",style:{paddingTop:"10px"}},void 0,this.state.addingSubuser?G:H))),this.state.addingSubuser?k(O.a,{container:!0,spacing:24},void 0,k(O.a,{item:!0,sm:12,md:6},void 0,k(W,{},void 0,k(C.a,{fullWidth:!0,label:this.props.intl.formatMessage({id:"Name"}),value:this.state.screenName,helperText:this.props.intl.formatMessage({id:"Name will be used as identifier"}),onChange:function(){e.setState({screenName:event.target.value})}})),k(W,{},void 0,k(C.a,{fullWidth:!0,label:this.props.intl.formatMessage({id:"Email address"}),value:this.state.email,error:this.state.email.length>0&&!o,onChange:function(){e.setState({email:event.target.value})}}))),k(O.a,{item:!0,sm:12,md:6},void 0,l,h)):k(O.a,{container:!0,spacing:24},void 0,k(O.a,{item:!0,sm:12,md:6},void 0,l),k(O.a,{item:!0,sm:12,md:6},void 0,h)),k(O.a,{container:!0,spacing:24},void 0,k(O.a,{item:!0,md:12},void 0,k(g.a,{variant:"body1",color:"inherit"},void 0,this.state.addingSubuser?K:L))),k(O.a,{container:!0,spacing:0},void 0,k(O.a,{item:!0,md:12,style:{textAlign:"right"}},void 0,k(f.a,{},void 0,k(m.a,{value:this.state.usergroup,onChange:function(t){e.setState({usergroup:t.target.value})}},void 0,k(w.a,{value:D},void 0,this.props.intl.formatMessage({id:"Do not inherit"})),t)))),k(O.a,{container:!0,spacing:24},void 0,k(O.a,{item:!0,md:12},void 0,k(P.a,{disabled:!r,variant:"contained",size:"small",color:"primary",onClick:this.handleSave.bind(this)},void 0,this.state.addingSubuser?this.props.intl.formatMessage({id:"Save"}):this.props.intl.formatMessage({id:"Update"})+" "+this.state.screenName),!!d&&k("div",{style:{width:"100%"}},void 0,k(g.a,{variant:"body1",color:"inherit",style:{color:"red",padding:"10px",textAlign:"center"}},void 0,d)))))}}])&&T(t.prototype,r),a&&T(t,a),Object.defineProperty(t,"prototype",{writable:!1}),o}(),X=Object(d.b)({user:Object(E.z)(),subusers:Object(E.t)(),createSuccess:Object(E.j)(),createUsername:Object(E.k)(),createError:Object(E.h)(),createErrorCode:Object(E.i)(),updateSuccess:Object(E.x)(),updateUsername:Object(E.y)(),updateError:Object(E.v)(),updateErrorCode:Object(E.w)()}),Y=Object(o.connect)(X);t.default=Object(n.compose)(Y)(Object(c.injectIntl)(V))}}]);