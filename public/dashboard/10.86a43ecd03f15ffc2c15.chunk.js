(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"572cda6f3e0ae77603b4":function(t,e,i){"use strict";i.r(e);var o,a=i("8af190b70a6bc55c6f1b"),n=i.n(a),r=i("ab039aecd4a1d4fedc0e"),s=i("d7dd51e1bf6bfc2c9c3d"),d=i("338d478a1eb52f0e5c7a"),c=i.n(d),l=(i("11c030caaf570b0cb53f"),i("a28fc3c963a1d4d1a2e5")),u=i("2bc72f9d0f19ef3c9b0b"),p=i.n(u),f=(i("d911cdcbba4045d139d0"),i("7ea78d835e682a4dee57"),i("5c0a236ca4c0b26f32cd")),b=i.n(f),h=i("c502bee2fd4be3dd7f62"),y=i.n(h),v=i("921c0b8c557fe6ba5da8"),m=i.n(v),g=i("435859b6b76fb67a754a"),S=i.n(g),O=i("2aea235afd5c55b8b19b"),w=i.n(O),j=i("c7fd554010f79f6c0ef8"),k=i.n(j),x=i("103c6b1cf0cce809ff01"),M=i("a72b40110d9c31c9b5c5"),F=i("6542cd13fd5dd1bcffd4");function I(t,e,i,a){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var n=t&&t.defaultProps,r=arguments.length-3;if(e||0===r||(e={children:void 0}),1===r)e.children=a;else if(r>1){for(var s=new Array(r),d=0;d<r;d++)s[d]=arguments[d+3];e.children=s}if(e&&n)for(var c in n)void 0===e[c]&&(e[c]=n[c]);else e||(e=n||{});return{$$typeof:o,type:t,key:void 0===i?null:""+i,ref:null,props:e,_owner:null}}function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(a=o.key,n=void 0,n=function(t,e){if("object"!==N(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!==N(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(a,"string"),"symbol"===N(n)?n:String(n)),o)}var a,n}function C(t,e){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function J(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,o=D(t);if(e){var a=D(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return function(t,e){if(e&&("object"===N(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function D(t){return(D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var E={schemata:["public"],brandName:"MapCentia ApS",aboutBox:"<p>My awesome web map</p>",enabledExtensions:["conflictSearch","streetView","coordinates","session","editor","offlineMap"],template:"default.tmpl"},_={configurations:[],key:!1,configurationWasSet:!1,name:"",description:"",body:E,bodyIsValid:!0,published:!0,bodyError:!1},z=I(r.FormattedMessage,{id:"Update configuration"}),A=I(r.FormattedMessage,{id:"Add configuration"}),T=I(r.FormattedMessage,{id:"Save"}),V=I(r.FormattedMessage,{id:"Delete"}),R=I(m.a,{variant:"body1"},void 0,I(r.FormattedMessage,{id:"Configuration is valid"})),B=I("span",{},void 0,I(m.a,{variant:"body1",color:"secondary"},void 0,I(r.FormattedMessage,{id:"Configuration is invalid"}))),W=I(r.FormattedMessage,{id:"Format JSON"}),L=I(m.a,{variant:"h6",color:"inherit"},void 0,I(r.FormattedMessage,{id:"Configuration was added"})),U=I(r.FormattedMessage,{id:"Add new configuration"}),$=I(r.FormattedMessage,{id:"Dashboard"}),q=I(m.a,{variant:"h6",color:"inherit"},void 0,I(r.FormattedMessage,{id:"Configuration was updated"})),G=I(w.a,{variant:"contained",size:"small"},void 0,I(r.FormattedMessage,{id:"Add new configuration"})),H=I(r.FormattedMessage,{id:"Dashboard"}),K=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(r,n.a.Component);var e,i,o,a=J(r);function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=a.call(this,t)).state=_,e}return e=r,o=[{key:"getDerivedStateFromProps",value:function(t,e){if(t.configurations&&!1===e.configurationWasSet&&t.configurations.length>0){var i={configurations:t.configurations};return t.configurations.map(function(t){if(e.key===t.key){var o=JSON.parse(t.value);i.name=o.name,i.description=o.description,i.body=JSON.parse(o.body),i.bodyIsValid=!0,i.published=o.published,i.configurationWasSet=!0}}),i}return null}}],(i=[{key:"componentDidMount",value:function(){this.props.match&&this.props.match.params&&this.props.match.params.id&&this.setState({key:this.props.match.params.id}),this.props.dispatch(Object(M.t)({userId:this.props.user.screenName}))}},{key:"componentWillUnmount",value:function(){this.props.dispatch(Object(M.g)())}},{key:"handleFormat",value:function(){this.state.bodyIsValid&&this.setState({body:JSON.stringify(JSON.parse(this.state.body),null,4)})}},{key:"handleJSONUpdate",value:function(t){var e=!1,i=!1;try{e=p.a.parse(t)}catch(t){i=t}this.setState({body:t,bodyError:i,bodyIsValid:!1!==e})}},{key:"handleFormSubmit",value:function(){var t=JSON.parse(JSON.stringify(this.state));this.state.bodyIsValid&&(t.body="string"===N(t.body)?JSON.parse(t.body):t.body,this.state.key?this.props.dispatch(Object(M.M)({userId:this.props.user.screenName,data:t})):this.props.dispatch(Object(M.e)({userId:this.props.user.screenName,data:t})))}},{key:"handleReset",value:function(){var t=this;this.setState(_,function(){t.props.dispatch(Object(M.g)())})}},{key:"handleDelete",value:function(){confirm(this.props.intl.formatMessage({id:"Delete"})+" ".concat(this.state.name,"?"))&&(this.props.dispatch(Object(M.n)({userId:this.props.user.screenName,configurationId:this.state.key})),this.props.history.push("/#configuration"))}},{key:"render",value:function(){var t=this,e=!1;this.state.name&&this.state.body&&Object.keys(this.state.body).length>0&&this.state.bodyIsValid&&(e=!0);var i="";i="undefined"!==typeof this.state.body?"string"===N(this.state.body)?this.state.body:JSON.stringify(this.state.body,null,4):JSON.stringify(E,null,4);var o=I(S.a,{item:!0,xs:!0},void 0,I(S.a,{container:!0},void 0,I(S.a,{item:!0},void 0,I(m.a,{variant:"h6",color:"inherit"},void 0,this.state.key?z:A))),I(S.a,{container:!0,direction:"row",alignItems:"center",justify:"center"},void 0,I(S.a,{item:!0,xs:!0},void 0,I(k.a,{id:"name",name:"name",required:!0,fullWidth:!0,label:this.props.intl.formatMessage({id:"Name"}),value:this.state.name,onChange:function(e){t.setState({name:e.target.value})}})),I(S.a,{item:!0,xs:!0,style:{textAlign:"right"}},void 0,I(w.a,{variant:"contained",color:"primary",disabled:!e,size:"small",style:{marginLeft:"10px"},onClick:this.handleFormSubmit.bind(this)},void 0,T),!!this.state.key&&I(w.a,{variant:"contained",color:"secondary",size:"small",style:{marginLeft:"10px"},onClick:this.handleDelete.bind(this)},void 0,V))),I(S.a,{container:!0,direction:"row",alignItems:"center",justify:"center"},void 0,I(S.a,{item:!0,xs:!0},void 0,I(k.a,{id:"description",name:"description",fullWidth:!0,label:this.props.intl.formatMessage({id:"Description"}),value:this.state.description,onChange:function(e){t.setState({description:e.target.value})}}))),I(S.a,{container:!0,direction:"row",alignItems:"center",justify:"center"},void 0,I(S.a,{item:!0,xs:!0,style:{paddingTop:"20px",paddingBottom:"20px"}},void 0,I(c.a,{mode:"json",theme:"monokai",onChange:this.handleJSONUpdate.bind(this),name:"unique_id",value:i,width:"100%",showPrintMargin:!1,editorProps:{$blockScrolling:!0}}))),I(S.a,{},void 0,I(S.a,{item:!0,xs:!0},void 0,I("div",{style:{display:"flex"}},void 0,I("div",{style:{flexGrow:"1"}},void 0,this.state.bodyIsValid?R:B),I("div",{},void 0,I(w.a,{variant:"contained",size:"small",disabled:!this.state.bodyIsValid,color:"primary",onClick:this.handleFormat.bind(this)},void 0,W))))),!!this.state.bodyError&&I("div",{},void 0,I("div",{},void 0,I("pre",{style:{fontSize:"12px"}},void 0,""+this.state.bodyError))),I(S.a,{container:!0,direction:"row",alignItems:"center",justify:"center"},void 0,I(S.a,{item:!0,xs:!0},void 0,I(b.a,{control:I(y.a,{checked:this.state.published,onChange:function(e){t.setState({published:e.target.checked})},value:"checkedA"}),label:this.props.intl.formatMessage({id:"Published"})})))),a=!1;return this.props.createSuccess&&(a=I(S.a,{item:!0,style:{textAlign:"center"}},void 0,I("div",{style:{paddingTop:"40px",paddingBottom:"40px"}},void 0,L,I("div",{style:{paddingTop:"10px"}},void 0,I(w.a,{variant:"contained",size:"small",onClick:this.handleReset.bind(this)},void 0,U),I(x.a,{to:"/dashboard/#configuration"},void 0,I(w.a,{color:"primary",variant:"contained",size:"small",style:{marginLeft:"10px"}},void 0,$)))))),this.props.updateSuccess&&(a=I(S.a,{item:!0,style:{textAlign:"center"}},void 0,I("div",{style:{paddingTop:"40px",paddingBottom:"40px"}},void 0,q,I("div",{style:{paddingTop:"10px"}},void 0,I(x.a,{to:"/dashboard/configuration/add"},void 0,G),I(x.a,{to:"/dashboard/#configuration"},void 0,I(w.a,{color:"primary",variant:"contained",size:"small",style:{marginLeft:"10px"}},void 0,H)))))),I(S.a,{container:!0,spacing:8,direction:"row",alignItems:"center",justify:"center"},void 0,this.props.createSuccess||this.props.updateSuccess?a:o)}}])&&P(e.prototype,i),o&&P(e,o),Object.defineProperty(e,"prototype",{writable:!1}),r}(),Q=Object(l.b)({user:Object(F.z)(),loading:Object(F.e)(),createSuccess:Object(F.f)(),updateSuccess:Object(F.u)(),configurations:Object(F.d)()});e.default=Object(s.connect)(Q)(Object(r.injectIntl)(K))}}]);